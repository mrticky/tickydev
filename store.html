<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Store — Ticky</title>
  <meta name="color-scheme" content="dark" />
  <link rel="icon" href="favicon.ico" />
  <style>
    :root{
      --bg:#050607;--surface:#0a0d0f;--edge:#12181c;--text:#e7f2e9;--muted:#91a39a;
      --acc1:#7ee787;--acc2:#22c55e;--accent:#B58CFF;--ring:rgba(34,197,94,.28)
    }
    *,*::before,*::after{box-sizing:border-box}
    html{height:100%;scroll-behavior:smooth;scroll-padding-top:64px}
    body{margin:0;min-height:100%;font-family:Inter,ui-sans-serif,system-ui;background:var(--bg);color:var(--text);overflow-x:hidden;line-height:1.65}

    /* bg */
    .bg1{position:fixed;inset:0;z-index:-3;background:
      radial-gradient(1200px 800px at 10% -10%, color-mix(in oklab,var(--accent) 12%, transparent), transparent 60%),
      radial-gradient(900px 600px at 120% -10%, color-mix(in oklab,var(--acc1) 10%, transparent), transparent 60%),
      linear-gradient(180deg,#020303 0%, var(--bg) 40% 100%)}
    .bg2{position:fixed;inset:0;z-index:-2;pointer-events:none;background:
      repeating-linear-gradient(0deg,transparent 0 22px,rgba(126,231,135,.05) 22px 23px);mix-blend-mode:soft-light;opacity:.35}

    /* header/nav */
    .wrap{max-width:1200px;margin:0 auto;padding:18px 22px}
    header{position:sticky;top:0;background:#050607e6;backdrop-filter:blur(10px);border-bottom:1px solid var(--edge);z-index:50}
    nav{display:flex;gap:12px;align-items:center;justify-content:space-between;min-height:56px}
    .brand{display:flex;gap:10px;align-items:center}
    .logo{width:26px;height:26px;border-radius:8px;background:conic-gradient(from 200deg,var(--acc1),var(--accent),var(--acc1));box-shadow:0 0 0 3px var(--ring)}
    .brand b{letter-spacing:.18em;text-transform:uppercase;color:var(--muted);font-size:12px}
    .navlinks{display:flex;gap:14px;align-items:center;flex-wrap:wrap}
    .navlinks a{color:var(--muted);text-decoration:none;font-size:14px;padding:8px 12px;border-radius:10px;border:1px solid transparent}
    .navlinks a:hover{color:var(--text);border-color:var(--edge);background:color-mix(in oklab,var(--surface) 92%, transparent)}
    .navlinks a.active{color:var(--text);border-color:color-mix(in oklab,var(--acc1) 35%, var(--edge));box-shadow:0 0 0 3px var(--ring)}

    /* hero (kept minimal) */
    .hero{padding:28px 0 6px;text-align:center}
    .hero h1{font-family:ui-monospace,Menlo,Consolas,monospace;font-size:clamp(26px,5vw,40px);margin:0}
    .hero p{color:var(--muted);margin:6px 0 0}

    /* product grid (blank-ish page until click) */
    .section{padding:20px 0 40px}
    .grid{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:18px}
    .card{cursor:pointer;border:1px solid var(--edge);border-radius:16px;background:linear-gradient(180deg,color-mix(in oklab,var(--surface) 94%,transparent),color-mix(in oklab,var(--surface) 86%,transparent));box-shadow:0 24px 70px rgba(0,0,0,.45);overflow:hidden;position:relative;transition:transform .18s ease, border-color .18s ease}
    .card::before{content:"";position:absolute;inset:-1px;border-radius:inherit;padding:1px;background:linear-gradient(135deg,color-mix(in oklab,var(--acc1) 38%, transparent),color-mix(in oklab,var(--accent) 38%, transparent));-webkit-mask:linear-gradient(#000 0 0) content-box,linear-gradient(#000 0 0);-webkit-mask-composite:xor;mask-composite:exclude;pointer-events:none}
    .card:hover{transform:translateY(-3px);border-color:color-mix(in oklab,var(--acc1) 45%, var(--edge))}
    .thumb{height:150px;background:#0d1115 url('boxpfp.png') center/cover no-repeat;border-bottom:1px solid var(--edge)}
    .card-body{padding:14px}
    .kicker{color:var(--muted);font-size:12px;text-transform:uppercase;letter-spacing:.14em;margin:0 0 10px}
    .title{font-family:ui-monospace,Menlo,Consolas,monospace;margin:0 0 6px}
    .stats{display:flex;gap:14px;color:var(--muted);font-size:13px;margin:8px 0 0}

    /* product drawer (detail panel) */
    .drawer{position:fixed;inset:0;display:none;z-index:80}
    .drawer.open{display:block}
    .scrim{position:absolute;inset:0;background:rgba(0,0,0,.6);backdrop-filter:blur(2px);opacity:0;transition:opacity .2s}
    .drawer.open .scrim{opacity:1}
    .panel{
      position:absolute;top:0;right:0;bottom:0;width:min(560px,100%);
      background:var(--surface);border-left:1px solid var(--edge);
      transform:translateX(100%);transition:transform .28s ease;box-shadow:-30px 0 100px rgba(0,0,0,.45)
    }
    .drawer.open .panel{transform:none}
    .panel-head{display:flex;justify-content:space-between;align-items:center;padding:16px 18px;border-bottom:1px solid var(--edge)}
    .panel-head h3{margin:0;font-family:ui-monospace}
    .close{appearance:none;border:1px solid var(--edge);background:#0f1316;color:var(--text);border-radius:10px;padding:8px 10px;cursor:pointer}

    .panel-body{display:grid;grid-template-columns:1fr;gap:16px;padding:16px 18px}
    .bigimg{border:1px solid var(--edge);border-radius:12px;overflow:hidden;background:#0e1316}
    .bigimg img{display:block;width:100%;height:260px;object-fit:cover}

    .buybox{border:1px solid var(--edge);border-radius:12px;padding:14px;background:linear-gradient(180deg,color-mix(in oklab,var(--surface) 96%,transparent),color-mix(in oklab,var(--surface) 88%,transparent))}
    .price{font-size:28px;font-weight:800;margin:0 0 6px}
    .stock{color:var(--muted);font-size:14px;margin:0 0 12px}
    .qty{display:flex;align-items:center;gap:10px;margin:8px 0 14px}
    .qty button{width:32px;height:32px;border-radius:8px;border:1px solid var(--edge);background:#0f1316;color:var(--text);cursor:pointer}
    .qty input{width:56px;text-align:center;border-radius:8px;border:1px solid var(--edge);background:#0f1316;color:var(--text);padding:6px 8px}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .btn{display:inline-flex;align-items:center;gap:8px;border-radius:10px;padding:10px 14px;border:1px solid var(--edge);background:#101519;color:var(--text);text-decoration:none;font-size:14px;cursor:pointer}
    .btn.primary{background:linear-gradient(135deg,var(--accent) 0%,#9d7bff 80%);color:#0b0b12;border:none}
    .desc{border-top:1px solid var(--edge);padding-top:12px;color:var(--muted);font-size:14px;white-space:pre-line}
  .desc-title{margin:10px 0 6px;color:var(--muted);font-size:14px;font-weight:700}
    /* previews */
    .previews{margin-top:10px;display:flex;gap:10px;align-items:center}
    .preview-thumb{width:160px;height:100px;object-fit:cover;border-radius:10px;border:1px solid var(--edge);cursor:pointer;transition:transform .18s ease,opacity .18s ease}
    .preview-thumb:hover{transform:scale(1.03);opacity:.95}

    /* modal/lightbox for preview */
    .preview-modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:120}
    .preview-modal.open{display:flex}
    .preview-modal .scrim{position:absolute;inset:0;background:rgba(0,0,0,.6);backdrop-filter:blur(3px);opacity:0;transition:opacity .28s}
    .preview-modal.open .scrim{opacity:1}
    .preview-panel{position:relative;z-index:121;max-width:90%;max-height:90%;border-radius:12px;overflow:hidden;transform:scale(.96);opacity:0;transition:transform .28s cubic-bezier(.2,.8,.2,1),opacity .28s}
    .preview-modal.open .preview-panel{transform:none;opacity:1}
    .preview-panel img{display:block;width:100%;height:auto;max-height:80vh;object-fit:contain;background:#060708}
    .preview-close{position:absolute;top:8px;right:8px;z-index:125}

    footer{text-align:center;color:var(--muted);font-size:13px;margin:40px 0}

    @media (max-width:1100px){.grid{grid-template-columns:repeat(3,minmax(0,1fr))}}
    @media (max-width:760px){.wrap{padding:16px}.grid{grid-template-columns:1fr 1fr}}
    @media (max-width:440px){.grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="bg1"></div>
  <div class="bg2"></div>

  <header>
    <div class="wrap">
      <nav>
        <div class="brand"><div class="logo"></div><b>ticky.dev</b></div>
        <div class="navlinks">
          <a href="index.html">Welcome</a>
          <a href="about.html">About Me</a>
          <a href="projects.html">Projects</a>
          <a href="contact.html">Contact</a>
          <a class="active" href="store.html">Store</a>
        </div>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <!-- Minimal hero -->
    <section class="hero">
      <h1>Store</h1>
      <p>Pick a product to view details. Page is clean until you click.</p>
    </section>

    <!-- Product grid (keep it light/blank-ish) -->
    <section class="section">
  <div class="grid" id="grid">
        <!-- Single product kept per request. Other products removed. -->
        <article class="card"
          data-title="Headless and Korblox Roblox Account"
          data-price="299.99"
          data-currency="£"
          data-stock="1"
          data-image="boxpfp.png"
          data-desc="Headless Horseman\nKorblox Deathspeaker\nViolet Valkyrie\n100s male outfits\nOld Limiteds on page"
          data-checkout="https://buy.stripe.com/6oUeVdeG67Xzh0C2J4c3m00"> <!-- Stripe Checkout link -->
          <div class="thumb"></div>
          <div class="card-body">
            <p class="kicker">Product</p>
            <h3 class="title">Headless and Korblox Roblox Account</h3>
            <div class="stats"><span>£299,99</span><span>•</span><span>In stock: 1</span></div>
          </div>
        </article>
      </div>
      <div style="text-align:center;margin-top:14px">
        <button id="showMore" class="btn" aria-expanded="false">Show more</button>
      </div>
    </section>

    <footer>© <span id="y"></span> Ticky.</footer>
  </main>

  <!-- Drawer (hidden until a card is clicked) -->
  <div class="drawer" id="drawer" aria-hidden="true">
    <div class="scrim" id="scrim"></div>
    <aside class="panel" role="dialog" aria-modal="true" aria-labelledby="pTitle">
      <div class="panel-head">
        <h3 id="pTitle">Product</h3>
        <button class="close" id="closeBtn">Close</button>
      </div>

      <div class="panel-body">
        <div class="bigimg"><img id="pImg" alt=""></div>

        <div class="buybox">
          <p class="price" id="pPrice">$0.00</p>
          <p class="stock" id="pStock">—</p>

          <div class="qty">
            <span>Quantity</span>
            <button id="minus">−</button>
            <input id="qty" type="number" min="1" value="1" inputmode="numeric" />
            <button id="plus">+</button>
          </div>

          <div class="row">
            <a class="btn primary" id="buyNow" target="_blank" rel="noopener">Buy Now →</a>
          </div>

          <div class="desc-header">
            <h4 class="desc-title">Description</h4>
          </div>

          <div class="desc" id="pDesc"></div>
        
          <div class="previews-header">
            <h4 class="desc-title">Previews</h4>
          </div>
          <div class="previews">
            <img id="previewImg" class="preview-thumb" src="headlessaccountpreview.png" alt="Preview image">
          </div>
        </div>
      </div>
    </aside>
  </div>

  <!-- Preview modal/lightbox -->
  <div class="preview-modal" id="previewModal" aria-hidden="true">
    <div class="scrim" id="previewScrim"></div>
    <div class="preview-panel" role="dialog" aria-modal="true">
      <button class="close preview-close" id="previewClose">Close</button>
      <img id="previewLarge" src="" alt="Preview large">
    </div>
  </div>

  <script>
    document.getElementById('y').textContent = new Date().getFullYear();

    // Elements
    const drawer = document.getElementById('drawer');
    const scrim = document.getElementById('scrim');
    const closeBtn = document.getElementById('closeBtn');

    const pTitle = document.getElementById('pTitle');
    const pImg   = document.getElementById('pImg');
    const pPrice = document.getElementById('pPrice');
    const pStock = document.getElementById('pStock');
    const pDesc  = document.getElementById('pDesc');
  const qtyInp = document.getElementById('qty');
  const minus  = document.getElementById('minus');
  const plus   = document.getElementById('plus');
  const buyNow = document.getElementById('buyNow');

    // Open drawer with product data
    document.querySelectorAll('.card').forEach(card=>{
      card.addEventListener('click', ()=>{
  const title = card.dataset.title || 'Product';
  const price = Number(card.dataset.price||0).toFixed(2);
  const currency = card.dataset.currency || '$';
  // use comma decimal for GBP display style if currency is £
  const useComma = currency === '£';
  const stock = Number(card.dataset.stock||0);
  const img   = card.dataset.image || 'boxpfp.png';
  // convert literal "\n" sequences in the data attribute into real newlines
  const desc  = (card.dataset.desc||'').replace(/\\n/g,'\n');
  const checkout = card.dataset.checkout || '#';

  pTitle.textContent = title;
  pImg.src = img;
  pImg.alt = title;
  const priceStr = useComma ? price.replace('.', ',') : price;
  pPrice.textContent = `${currency}${priceStr}`;
  pStock.textContent = `${stock} In Stock`;
        // render description: if multiple lines, show as a bullet list
        (function(){
          function escapeHtml(s){
            return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
          }
          const lines = desc.split('\n').map(s=>s.trim()).filter(Boolean);
          if(lines.length > 1){
            pDesc.innerHTML = '<ul>' + lines.map(l => '<li>' + escapeHtml(l) + '</li>').join('') + '</ul>';
          } else {
            pDesc.textContent = desc;
          }
        })();
        qtyInp.value = 1;
        qtyInp.max = Math.max(1, stock);
        buyNow.href = checkout; // ← Stripe Checkout URL (replace per item)

        drawer.classList.add('open');
        drawer.setAttribute('aria-hidden','false');
      });
    });

    function closeDrawer(){
      drawer.classList.remove('open');
      drawer.setAttribute('aria-hidden','true');
    }
    scrim.addEventListener('click', closeDrawer);
    closeBtn.addEventListener('click', closeDrawer);
    window.addEventListener('keydown', e=>{ if(e.key==='Escape') closeDrawer(); });

    // Qty stepper
    minus.addEventListener('click', ()=>{
      const min = 1;
      qtyInp.value = Math.max(min, (parseInt(qtyInp.value||'1',10)-1));
    });
    plus.addEventListener('click', ()=>{
      const max = parseInt(qtyInp.max||'99',10);
      qtyInp.value = Math.min(max, (parseInt(qtyInp.value||'1',10)+1));
    });

    // (Add to Cart removed — purchases go directly to Stripe via Buy Now)

    // Show more / Show less for product grid
    (function(){
      const GRID_LIMIT = 4; // number of items to show initially
      const grid = document.getElementById('grid');
      const cards = Array.from(grid ? grid.querySelectorAll('.card') : []);
      const btn = document.getElementById('showMore');
      if(!btn || cards.length <= GRID_LIMIT){
        if(btn) btn.style.display = 'none';
        return;
      }

      let expanded = false;

      function updateVisibility(){
        cards.forEach((c,i)=> c.style.display = (expanded || i < GRID_LIMIT) ? '' : 'none');
        btn.textContent = expanded ? 'Show less' : `Show ${cards.length - GRID_LIMIT} more`;
        btn.setAttribute('aria-expanded', String(expanded));
      }

      btn.addEventListener('click', ()=>{ expanded = !expanded; updateVisibility(); });

      // initial state
      updateVisibility();
    })();

    // Preview modal logic (thumbnail -> large modal with fade+scale)
    (function(){
      const thumb = document.getElementById('previewImg');
      const modal = document.getElementById('previewModal');
      const scrimP = document.getElementById('previewScrim');
      const large = document.getElementById('previewLarge');
      const closeP = document.getElementById('previewClose');
      if(!thumb || !modal) return;

      function openPreview(src, alt){
        large.src = src;
        large.alt = alt || '';
        modal.classList.add('open');
        modal.setAttribute('aria-hidden','false');
      }
      function closePreview(){
        modal.classList.remove('open');
        modal.setAttribute('aria-hidden','true');
        // remove src after transition to allow release
        setTimeout(()=>{ large.src = ''; }, 300);
      }

      thumb.addEventListener('click', ()=> openPreview(thumb.src, thumb.alt));
      scrimP && scrimP.addEventListener('click', closePreview);
      closeP && closeP.addEventListener('click', closePreview);
      window.addEventListener('keydown', e=>{ if(e.key==='Escape') closePreview(); });
    })();
  </script>
</body>
</html>
